<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- è®¾ç½®æ–‡æ¡£å­—ç¬¦ç¼–ç ä¸ºUTF-8ï¼Œæ”¯æŒä¸­æ–‡æ˜¾ç¤º -->
    <meta charset="UTF-8">
    <!-- è®¾ç½®è§†å£ï¼Œä½¿é¡µé¢åœ¨ä¸åŒè®¾å¤‡ä¸Šè‡ªé€‚åº” -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <title>è›‹ç™½è´¨å¯è§†åŒ–å·¥å…·</title>
    <!-- å¼•å…¥3Dmol.jsåº“ï¼Œç”¨äºè›‹ç™½è´¨3Då¯è§†åŒ– -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol/2.1.0/3Dmol-min.js"></script>
    <style>
        /* ========== CSSå˜é‡å®šä¹‰ï¼ˆä¸»é¢˜é¢œè‰²ï¼‰========== */
        /* å®šä¹‰ä¸»è‰²è°ƒä¸ºè“è‰²ï¼Œæ¬¡è‰²è°ƒä¸ºç»¿è‰²ï¼ŒèƒŒæ™¯è‰²ä¸ºæµ…ç°è‰² */
        :root {
            --primary: #2196F3;      /* ä¸»è‰²è°ƒï¼ˆè“è‰²ï¼‰ */
            --secondary: #4CAF50;   /* æ¬¡è‰²è°ƒï¼ˆç»¿è‰²ï¼‰ */
            --background: #f8f9fa;   /* èƒŒæ™¯è‰²ï¼ˆæµ…ç°è‰²ï¼‰ */
        }

        /* ========== å…¨å±€æ ·å¼é‡ç½® ========== */
        /* ä½¿ç”¨border-boxç›’æ¨¡å‹ï¼Œé‡ç½®æ‰€æœ‰å…ƒç´ è¾¹è·å’Œå†…è¾¹è· */
        * {
            box-sizing: border-box;   /* ç¡®ä¿å…ƒç´ å®½åº¦åŒ…å«paddingå’Œborder */
            margin: 0;               /* æ¸…é™¤é»˜è®¤å¤–è¾¹è· */
            padding: 0;              /* æ¸…é™¤é»˜è®¤å†…è¾¹è· */
        }

        /* ========== é¡µé¢ä¸»ä½“æ ·å¼ ========== */
        /* è®¾ç½®é¡µé¢æ•´ä½“å¸ƒå±€å’ŒåŸºç¡€æ ·å¼ */
        body {
            padding: 12px;           /* é¡µé¢å†…è¾¹è· */
            font-family: 'Arial', 'PingFang SC', 'Microsoft YaHei', sans-serif; /* å­—ä½“ä¼˜å…ˆé¡ºåº */
            background: var(--background); /* ä½¿ç”¨å®šä¹‰å¥½çš„èƒŒæ™¯è‰² */
            color: #333;             /* ä¸»æ–‡æœ¬é¢œè‰² */
        }

        /* ========== å®¹å™¨æ ·å¼ ========== */
        /* ä¸»è¦å†…å®¹å®¹å™¨ï¼ˆæœ€å¤§å®½åº¦1200pxï¼Œæ°´å¹³å±…ä¸­ï¼‰ */
        .container {
            max-width: 1200px;       /* æœ€å¤§å®½åº¦é™åˆ¶ */
            margin: 0 auto;          /* æ°´å¹³å±…ä¸­ */
            padding: 0;               /* æ¸…é™¤å†…è¾¹è· */
        }

        /* ========== æ ‡é¢˜æ ·å¼ ========== */
        /* é¡µé¢ä¸»æ ‡é¢˜æ ·å¼ */
        h1 {
            text-align: center;       /* æ–‡æœ¬å±…ä¸­ */
            margin: 10px 0 15px;      /* ä¸Šä¸‹è¾¹è· */
            font-size: 1.5rem;        /* å­—ä½“å¤§å° */
            color: #1976D2;           /* æ ‡é¢˜é¢œè‰²ï¼ˆæ·±è“è‰²ï¼‰ */
        }

        /* ========== 3DæŸ¥çœ‹å™¨æ ·å¼ ========== */
        /* 3Då¯è§†åŒ–åŒºåŸŸæ ·å¼ */
        #viewer3d {
            width: 100%;             /* å®½åº¦100% */
            height: 65vh;            /* é«˜åº¦ä¸ºè§†å£é«˜åº¦çš„65% */
            min-height: 280px;        /* æœ€å°é«˜åº¦é™åˆ¶ */
            max-height: 550px;        /* æœ€å¤§é«˜åº¦é™åˆ¶ */
            border-radius: 10px;      /* åœ†è§’æ•ˆæœ */
            background: white;       /* ç™½è‰²èƒŒæ™¯ */
            position: relative;      /* ç›¸å¯¹å®šä½ï¼ˆä¸ºå†…éƒ¨ç»å¯¹å®šä½å…ƒç´ å‡†å¤‡ï¼‰ */
            overflow: hidden;        /* éšè—æº¢å‡ºå†…å®¹ */
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* æ·»åŠ é˜´å½±æ•ˆæœ */
            margin-bottom: 10px;     /* åº•éƒ¨å¤–è¾¹è· */
        }

        /* ========== æ§åˆ¶é¢æ¿åŒºåŸŸæ ·å¼ ========== */
        /* åŒ…å«é€‰æ‹©å™¨ã€æŒ‰é’®ç­‰æ§åˆ¶å…ƒç´  */
        .controls-section {
            display: flex;           /* ä½¿ç”¨Flexå¸ƒå±€ */
            flex-direction: column;   /* å‚ç›´æ’åˆ— */
            gap: 8px;                /* å…ƒç´ é—´è· */
            padding: 0 3px;          /* å·¦å³å†…è¾¹è· */
        }

        /* ========== æ¨¡å‹é€‰æ‹©å™¨æ ·å¼ ========== */
        /* è›‹ç™½è´¨æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰èœå• */
        #modelSelector {
            width: 100%;             /* å®½åº¦100% */
            padding: 12px;           /* å†…è¾¹è· */
            border: 2px solid var(--primary); /* è¾¹æ¡†ï¼ˆä¸»è‰²è°ƒï¼‰ */
            border-radius: 8px;      /* åœ†è§’ */
            font-size: 0.95rem;      /* å­—ä½“å¤§å° */
            background: white;       /* ç™½è‰²èƒŒæ™¯ */
            margin: 0;               /* æ¸…é™¤å¤–è¾¹è· */
        }
        
        /* ========== çŠ¶æ€æ æ ·å¼ ========== */
        /* æ˜¾ç¤ºæ¨¡å‹åŠ è½½çŠ¶æ€ç­‰ä¿¡æ¯ */
        .status-container {
            display: flex;           /* ä½¿ç”¨Flexå¸ƒå±€ */
            justify-content: center;  /* å†…å®¹æ°´å¹³å±…ä¸­ */
            align-items: center;      /* å†…å®¹å‚ç›´å±…ä¸­ */
            padding: 8px 12px;       /* å†…è¾¹è· */
            background: white;       /* ç™½è‰²èƒŒæ™¯ */
            border-radius: 10px;      /* åœ†è§’ */
            font-size: 0.9rem;       /* å­—ä½“å¤§å° */
            color: #444;              /* æ–‡æœ¬é¢œè‰² */
            margin: 5px 0;            /* ä¸Šä¸‹å¤–è¾¹è· */
            height: 45px;            /* å›ºå®šé«˜åº¦ */
            box-shadow: 0 1px 3px rgba(0,0,0,0.06); /* è½»å¾®é˜´å½± */
        }
        
        /* çŠ¶æ€ä¿¡æ¯æ–‡å­—æ ·å¼ */
        #status-info {
            font-weight: bold;       /* ç²—ä½“ */
            color: var(--primary);    /* ä¸»è‰²è°ƒ */
            font-size: 0.9rem;        /* å­—ä½“å¤§å° */
        }
        
        /* ========== æŒ‰é’®åŒºåŸŸæ ·å¼ ========== */
        /* æ˜¾ç¤ºæ¨¡å¼æŒ‰é’®ç½‘æ ¼å¸ƒå±€ */
        .buttons-grid {
            display: grid;                                   /* ä½¿ç”¨ç½‘æ ¼å¸ƒå±€ */
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* è‡ªé€‚åº”åˆ—å®½ */
            gap: 8px;                                        /* æŒ‰é’®é—´è· */
            margin-bottom: 15px;                             /* åº•éƒ¨å¤–è¾¹è· */
        }

        /* æŒ‰é’®åŸºç¡€æ ·å¼ */
        button {
            padding: 12px 5px;       /* å†…è¾¹è· */
            background: var(--primary); /* ä¸»è‰²è°ƒèƒŒæ™¯ */
            color: white;            /* ç™½è‰²æ–‡å­— */
            border: none;            /* æ— è¾¹æ¡† */
            border-radius: 8px;       /* åœ†è§’ */
            cursor: pointer;         /* é¼ æ ‡æŒ‡é’ˆæ ·å¼ */
            transition: all 0.15s;  /* è¿‡æ¸¡æ•ˆæœ */
            display: flex;           /* Flexå¸ƒå±€ */
            align-items: center;     /* å‚ç›´å±…ä¸­ */
            justify-content: center;  /* æ°´å¹³å±…ä¸­ */
            gap: 5px;               /* å›¾æ ‡ä¸æ–‡å­—é—´è· */
            font-size: 0.9rem;       /* å­—ä½“å¤§å° */
            font-weight: bold;       /* ç²—ä½“ */
            height: 45px;            /* å›ºå®šé«˜åº¦ */
        }

        /* æŒ‰é’®æ‚¬åœæ•ˆæœ */
        button:hover {
            background: #1976D2;     /* æ‚¬åœæ—¶èƒŒæ™¯å˜æ·± */
        }

        /* æ¿€æ´»çŠ¶æ€æŒ‰é’®æ ·å¼ */
        button.active {
            background: var(--secondary); /* ä½¿ç”¨æ¬¡è‰²è°ƒï¼ˆç»¿è‰²ï¼‰ */
        }

        /* ========== æ³¨é‡Šé¢æ¿æ ·å¼ ========== */
        /* å³ä¸Šè§’çš„è§£é‡Šæ€§é¢æ¿ */
        .annotation-panel {
            position: absolute;      /* ç»å¯¹å®šä½ */
            top: 20px;               /* è·ç¦»é¡¶éƒ¨20px */
            right: 20px;             /* è·ç¦»å³ä¾§20px */
            background: rgba(255,255,255,0.98); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
            border-radius: 10px;     /* åœ†è§’ */
            box-shadow: 0 3px 12px rgba(0,0,0,0.15); /* é˜´å½± */
            padding: 12px 15px;      /* å†…è¾¹è· */
            font-size: 0.85rem;      /* å­—ä½“å¤§å° */
            color: #333;            /* æ–‡æœ¬é¢œè‰² */
            max-width: 300px;        /* æœ€å¤§å®½åº¦é™åˆ¶ */
            z-index: 10;             /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            line-height: 1.5;        /* è¡Œé«˜ */
        }
        
        /* æ³¨é‡Šé¢æ¿æ ‡é¢˜æ ·å¼ */
        .annotation-panel strong {
            font-size: 1rem;         /* æ ‡é¢˜å­—ä½“ç¨å¤§ */
            color: #1565C0;          /* æ ‡é¢˜é¢œè‰²ï¼ˆæ·±è“ï¼‰ */
            display: block;          /* å—çº§å…ƒç´  */
            margin-bottom: 8px;      /* åº•éƒ¨è¾¹è· */
            font-weight: 600;        /* åŠ ç²— */
        }

        /* ========== åº•éƒ¨æ°´å°åŒºåŸŸ ========== */
        /* é¡µé¢åº•éƒ¨çš„ä¿¡æ¯åŒºåŸŸ */
        .footer-watermark {
            display: flex;           /* Flexå¸ƒå±€ */
            justify-content: center; /* å†…å®¹æ°´å¹³å±…ä¸­ */
            align-items: center;     /* å†…å®¹å‚ç›´å±…ä¸­ */
            width: 100%;             /* å®½åº¦100% */
            padding: 12px 0;         /* ä¸Šä¸‹å†…è¾¹è· */
            background: white;       /* ç™½è‰²èƒŒæ™¯ */
            margin-top: 15px;        /* ä¸ä¸Šæ–¹å†…å®¹é—´è· */
            border-top: 1px solid #eee; /* é¡¶éƒ¨è¾¹æ¡† */
            max-width: 1200px;       /* æœ€å¤§å®½åº¦ */
            position: relative;      /* ç›¸å¯¹å®šä½ */
            margin: 0 auto;          /* æ°´å¹³å±…ä¸­ */
            border-radius: 10px;     /* åœ†è§’ */
        }

        /* æ°´å°å†…å®¹å®¹å™¨ */
        .watermark-content {
            display: flex;           /* Flexå¸ƒå±€ */
            align-items: center;     /* å‚ç›´å±…ä¸­ */
            gap: 15px;               /* å…ƒç´ é—´è· */
            max-width: 95%;          /* æœ€å¤§å®½åº¦95% */
            width: 100%;             /* å®½åº¦100% */
            justify-content: center; /* å†…å®¹æ°´å¹³å±…ä¸­ */
        }

        /* Logoå®¹å™¨æ ·å¼ */
        .logo-container {
            width: 60px;             /* å®½åº¦ */
            height: 60px;            /* é«˜åº¦ */
            padding: 3px;            /* å†…è¾¹è· */
            background: rgba(255,255,255,0.9); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
            border-radius: 8px;      /* åœ†è§’ */
            flex-shrink: 0;          /* é˜²æ­¢ç¼©å° */
            display: flex;            /* Flexå¸ƒå±€ */
            align-items: center;     /* å‚ç›´å±…ä¸­ */
            justify-content: center;  /* æ°´å¹³å±…ä¸­ */
        }

        /* Logoå›¾ç‰‡æ ·å¼ */
        .logo-container img {
            width: 100%;             /* å®½åº¦100% */
            height: 100%;            /* é«˜åº¦100% */
            object-fit: contain;     /* ä¿æŒæ¯”ä¾‹å¡«å…… */
        }

        /* æ–‡æœ¬å®¹å™¨æ ·å¼ */
        .text-container {
            text-align: center;       /* æ–‡æœ¬å±…ä¸­ */
            font-size: 0.8rem;        /* å­—ä½“å¤§å° */
            color: #555;             /* æ–‡æœ¬é¢œè‰² */
            line-height: 1.3;        /* è¡Œé«˜ */
        }

        /* æ–‡æœ¬è¡Œæ ·å¼ */
        .text-container div {
            white-space: nowrap;      /* ç¦æ­¢æ¢è¡Œ */
            overflow: hidden;        /* æº¢å‡ºéšè— */
            text-overflow: ellipsis; /* æº¢å‡ºæ˜¾ç¤ºçœç•¥å· */
        }

        /* ç¬¬ä¸€è¡Œæ–‡æœ¬ç‰¹æ®Šæ ·å¼ */
        .text-container div:first-child {
            font-weight: 600;        /* åŠ ç²— */
            font-size: 0.85rem;       /* å­—ä½“ç¨å¤§ */
            color: #2196F3;          /* ä¸»è‰²è°ƒ */
            margin-bottom: 3px;      /* åº•éƒ¨è¾¹è· */
        }

        /* ========== å“åº”å¼è®¾è®¡ ========== */
        /* ä¸­ç­‰å±å¹•è®¾å¤‡ï¼ˆå¹³æ¿ç­‰ï¼‰ */
        @media (max-width: 768px) {
            /* é¡µé¢ä¸»ä½“è°ƒæ•´ */
            body {
                padding: 8px;        /* å‡å°‘å†…è¾¹è· */
            }
            
            /* æ ‡é¢˜è°ƒæ•´ */
            h1 {
                font-size: 1.25rem;  /* å­—ä½“ç¨å° */
                margin: 8px 0 12px;  /* è°ƒæ•´è¾¹è· */
            }
            
            /* 3DæŸ¥çœ‹å™¨è°ƒæ•´ */
            #viewer3d {
                height: 50vh;        /* é«˜åº¦è°ƒæ•´ä¸º50%è§†å£ */
                min-height: 230px;   /* æœ€å°é«˜åº¦é™ä½ */
            }
            
            /* æ§åˆ¶é¢æ¿é—´è·è°ƒæ•´ */
            .controls-section {
                gap: 6px;            /* å‡å°‘é—´è· */
            }
            
            /* é€‰æ‹©å™¨è°ƒæ•´ */
            #modelSelector {
                padding: 10px;       /* å‡å°‘å†…è¾¹è· */
                font-size: 0.85rem;  /* å­—ä½“ç¨å° */
            }
            
            /* æŒ‰é’®ç½‘æ ¼å¸ƒå±€è°ƒæ•´ */
            .buttons-grid {
                grid-template-columns: repeat(2, 1fr); /* æ”¹ä¸ºä¸¤åˆ—å¸ƒå±€ */
                gap: 6px;            /* å‡å°‘é—´è· */
            }
            
            /* æŒ‰é’®è°ƒæ•´ */
            button {
                height: 40px;        /* é«˜åº¦é™ä½ */
                padding: 0 4px;      /* è°ƒæ•´å†…è¾¹è· */
                font-size: 0.8rem;   /* å­—ä½“ç¨å° */
            }
            
            /* æ³¨é‡Šé¢æ¿è°ƒæ•´ï¼ˆç§»åŠ¨ç«¯ï¼‰ */
            .annotation-panel {
                max-width: 40%;      /* å®½åº¦é™åˆ¶ */
                padding: 8px 10px;   /* è°ƒæ•´å†…è¾¹è· */
                font-size: 0.7rem;   /* å­—ä½“æ›´å° */
                top: 8px;            /* é¡¶éƒ¨ä½ç½®è°ƒæ•´ */
                right: 8px;          /* å³ä¾§ä½ç½®è°ƒæ•´ */
                line-height: 1.4;    /* è°ƒæ•´è¡Œé«˜ */
                background: rgba(255,255,255,0.5);  /* æ›´é«˜é€æ˜åº¦ */
            }
            
            /* æ³¨é‡Šæ ‡é¢˜è°ƒæ•´ */
            .annotation-panel strong {
                font-size: 0.8rem;   /* å­—ä½“æ›´å° */
                margin-bottom: 5px;  /* åº•éƒ¨è¾¹è·è°ƒæ•´ */
            }
            
            /* çŠ¶æ€æ è°ƒæ•´ */
            .status-container {
                margin: 4px 0;       /* è¾¹è·è°ƒæ•´ */
                padding: 6px 10px;   /* å†…è¾¹è·è°ƒæ•´ */
                height: 40px;        /* é«˜åº¦é™ä½ */
            }
            
            /* çŠ¶æ€ä¿¡æ¯å­—ä½“è°ƒæ•´ */
            #status-info {
                font-size: 0.85rem;  /* å­—ä½“ç¨å° */
            }
            
            /* æ°´å°åŒºåŸŸè°ƒæ•´ */
            .footer-watermark {
                padding: 10px 0;     /* è°ƒæ•´å†…è¾¹è· */
                margin-top: 12px;    /* é¡¶éƒ¨è¾¹è·è°ƒæ•´ */
            }
            
            /* æ°´å°å†…å®¹è°ƒæ•´ */
            .watermark-content {
                gap: 10px;           /* å‡å°‘é—´è· */
            }
            
            /* Logoå®¹å™¨è°ƒæ•´ */
            .logo-container {
                width: 50px;         /* å®½åº¦ç¼©å° */
                height: 50px;        /* é«˜åº¦ç¼©å° */
            }
            
            /* æ–‡æœ¬å®¹å™¨è°ƒæ•´ */
            .text-container {
                font-size: 0.75rem;  /* å­—ä½“ç¼©å° */
            }
            
            /* ç¬¬ä¸€è¡Œæ–‡æœ¬è°ƒæ•´ */
            .text-container div:first-child {
                font-size: 0.8rem;   /* å­—ä½“å¤§å° */
            }
        }
        
        /* å°å±å¹•è®¾å¤‡ï¼ˆæ‰‹æœºç­‰ï¼‰ */
        @media (max-width: 480px) {
            /* æ ‡é¢˜è°ƒæ•´ */
            h1 {
                font-size: 1.15rem;  /* è¿›ä¸€æ­¥ç¼©å° */
            }
            
            /* 3DæŸ¥çœ‹å™¨è°ƒæ•´ */
            #viewer3d {
                height: 45vh;       /* é«˜åº¦è¿›ä¸€æ­¥é™ä½ */
            }
            
            /* æŒ‰é’®è°ƒæ•´ */
            button {
                font-size: 0.75rem;  /* å­—ä½“ç¼©å° */
                height: 38px;        /* é«˜åº¦ç¨å° */
            }
            
            /* æ³¨é‡Šé¢æ¿è°ƒæ•´ï¼ˆè¶…å°å±å¹•ï¼‰ */
            .annotation-panel {
                max-width: 45%;      /* å®½åº¦ç¨å¤§ */
                padding: 7px 8px;   /* è°ƒæ•´å†…è¾¹è· */
                font-size: 0.65rem;   /* å­—ä½“æ›´å° */
            }
            
            /* æ³¨é‡Šæ ‡é¢˜è°ƒæ•´ */
            .annotation-panel strong {
                font-size: 0.75rem;   /* å­—ä½“å¤§å° */
            }
            
            /* æ°´å°åŒºåŸŸè°ƒæ•´ */
            .footer-watermark {
                padding: 8px 0;     /* è°ƒæ•´å†…è¾¹è· */
            }
            
            /* æ–‡æœ¬å®¹å™¨å†…divè°ƒæ•´ */
            .text-container div {
                max-width: 85vw;    /* å®½åº¦é™åˆ¶ */
            }
        }
    </style>
</head>
<body>
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <h1>è›‹ç™½è´¨å¯è§†åŒ–å·¥å…·</h1>
        
        <!-- 3Då¯è§†åŒ–åŒºåŸŸ -->
        <div id="viewer3d">
            <!-- æ³¨é‡Šé¢æ¿ - å›ºå®šåœ¨å³ä¸Šè§’ -->
            
            <!-- åˆå§‹é¢æ¿ä¿¡æ¯ -->
            <div class="annotation-panel" id="annotation-panel">
                <strong>é£˜å¸¦æ¨¡å‹ (Ribbon)</strong>
                <b>å®šä¹‰ï¼š</b>ç”¨æ‰å¹³é£˜å¸¦è¡¨ç¤ºäºŒçº§ç»“æ„ï¼ˆÎ±èºæ—‹ä¸ºèºæ—‹çŠ¶ï¼ŒÎ²æŠ˜å ä¸ºç®­å¤´ï¼‰ã€‚
                <b>ç‰¹ç‚¹ï¼š</b>å¿½ç•¥åŸå­ç»†èŠ‚ï¼Œçªå‡ºè›‹ç™½è´¨éª¨æ¶çš„æŠ˜å æ¨¡å¼ã€‚
            </div>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿åŒºåŸŸ -->
        <div class="controls-section">
            <!-- è›‹ç™½è´¨æ¨¡å‹é€‰æ‹©å™¨ -->
            <select id="modelSelector" onchange="loadSelectedModel()" title="é€‰æ‹©è¦æŸ¥çœ‹çš„è›‹ç™½è´¨æ¨¡å‹">
                <option value="1e6b" selected>1E6B - åŸºç¡€æ¨¡å‹</option>
                <option value="4ins">4INS - èƒ°å²›ç´ ç±»ä¼¼ç‰©</option>
                <option value="7rsa_alpha1">7RSA Alphaèºæ—‹</option>
                <option value="7rsa_beta146_betasheet">7RSA BetaæŠ˜å ç‰‡</option>
                <option value="7rsa_loop2_loop">7RSA ç¯çŠ¶ç»“æ„</option>
                <option value="7rsa_turn1_turn">7RSA è½¬è§’ç»“æ„</option>
                <option value="my_structure">è‡ªå®šä¹‰ç»“æ„</option>
            </select>
            
            <!-- çŠ¶æ€æ  -->
            <div class="status-container">
                <span id="status-info">æ¨¡å‹åŠ è½½å®Œæˆ</span>
            </div>
            
            <!-- æ˜¾ç¤ºæ¨¡å¼æŒ‰é’®åŒºåŸŸ -->
            <div class="buttons-grid">
                <button onclick="setDisplayMode('ribbon')" class="active">ğŸ—ï¸ é£˜å¸¦æ¨¡å‹</button>
                <button onclick="setDisplayMode('wireframe')">ğŸ”² çº¿æ£’æ¨¡å‹</button>
                <button onclick="setDisplayMode('ballstick')">âš¾ æ£’çƒæ£æ¨¡å‹</button>
                <button onclick="setDisplayMode('spacefill')">ğŸ”µ ç©ºé—´å¡«å……</button>
                <button onclick="setDisplayMode('surface')">ğŸŸ¢ è¡¨é¢å¡«å……</button>
                <button onclick="setDisplayMode('hydrophobic')">ğŸŒŠ äº²ç–æ°´åˆ†å¸ƒ</button>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨æ°´å°åŒºåŸŸ -->
    <div class="footer-watermark">
        <div class="watermark-content">
            <!-- Logoå®¹å™¨ -->
            <div class="logo-container">
                <!-- BioStruct Logo -->
                <img src="https://suyecuni.github.io/BioStruct/images/logo.png" alt="BioStruct Logo">
            </div>
            <!-- æ–‡æœ¬ä¿¡æ¯ -->
            <div class="text-container">
                <div>BioStructå±•ç¤ºå¹³å°</div>
                <div>è¥¿å—å¤§å­¦ç”Ÿå‘½ç§‘å­¦å­¦é™¢ | åˆ¶ä½œï¼šå…°å©·ã€è°¢ä½³å®</div>
                <div>Â©Southwest University | Ting Lan, Jiahong Xie</div>
            </div>
        </div>
    </div>
    
    <script>
        // ========== JavaScriptä»£ç å®ç°åŠŸèƒ½ ==========
        
        // åˆå§‹åŒ–3Dåˆ†å­æŸ¥çœ‹å™¨
        const viewer = $3Dmol.createViewer("viewer3d", {
            background: "#ffffff",            // è®¾ç½®ç™½è‰²èƒŒæ™¯
            defaultcolors: $3Dmol.elementColors.JMol // ä½¿ç”¨JMOLé…è‰²æ–¹æ¡ˆ
        });
        
        // å®šä¹‰ä¸åŒçš„æ˜¾ç¤ºæ¨¡å¼åŠå…¶é…ç½®
        const displayModes = {
            // é£˜å¸¦æ¨¡å‹é…ç½®
            ribbon: {
                style: { 
                    cartoon: { 
                        // é¢œè‰²å‡½æ•°ï¼šæ ¹æ®æ°¨åŸºé…¸æ®‹åŸºä½ç½®è¿”å›ä¸åŒé¢œè‰²
                        colorfunc: function(atom) {
                            // å®šä¹‰ä¸åŒæ®‹åŸºåŒºé—´æ®µçš„é¢œè‰²
                            const colorBlocks = [
                                {start: 1, end: 40, color: '#55aa7f'},  // ç»¿è‰²åŒºé—´
                                {start: 41, end: 80, color: '#d2b777'}, // æ£•è‰²åŒºé—´
                                {start: 81, end: 120, color: '#ff8b8d'},// ç²‰è‰²åŒºé—´
                                {start: 121, end: 160, color: '#af8aff'},// ç´«è‰²åŒºé—´
                                {start: 161, end: 9999, color: '#55aaff'} // è“è‰²åŒºé—´
                            ];
                            const resi = atom.resi; // å½“å‰æ®‹åŸºä½ç½®
                            // æŸ¥æ‰¾å½“å‰æ®‹åŸºæ‰€å±çš„é¢œè‰²åŒºé—´
                            for (let block of colorBlocks) {
                                if (resi >= block.start && resi <= block.end) return block.color;
                            }
                            return '#B0B8C1'; // é»˜è®¤ç°è‰²
                        },
                        thickness: 0.6,  // é£˜å¸¦åšåº¦
                        arrows: true      // æ˜¾ç¤ºBetaæŠ˜å ç®­å¤´
                    }
                },
                label: "é£˜å¸¦æ¨¡å‹" // æ˜¾ç¤ºæ¨¡å¼çš„æ ‡ç­¾
            },
            // çº¿æ£’æ¨¡å‹é…ç½®
            wireframe: {
                style: { 
                    stick: { radius: 0.12 },          // åŒ–å­¦é”®åŠå¾„
                    sphere: { radius: 0, opacity: 0 } // éšè—åŸå­çƒä½“
                },
                label: "çº¿æ£’æ¨¡å‹"
            },
            // æ£’çƒæ£æ¨¡å‹é…ç½®
            ballstick: {
                style: { 
                    stick: { radius: 0.12 },          // æ£çŠ¶åŒ–å­¦é”®åŠå¾„
                    sphere: { radius: 0.32, opacity: 0.9 } // åŸå­çƒä½“å¤§å°å’Œé€æ˜åº¦
                },
                label: "æ£’çƒæ£æ¨¡å‹"
            },
            // ç©ºé—´å¡«å……æ¨¡å‹é…ç½®
            spacefill: {
                style: { sphere: { scale: 0.6 } },    // çƒä½“å¤§å°æ¯”ä¾‹
                surface: { type: $3Dmol.SurfaceType.VDW, opts: { opacity: 0.85 } } // è¡¨é¢æ¸²æŸ“é…ç½®
            },
            // è¡¨é¢å¡«å……æ¨¡å‹é…ç½®
            surface: {
                style: {},  // ä¸åº”ç”¨ç‰¹å®šæ ·å¼
                surface: null,
                label: "è¡¨é¢å¡«å……æ¨¡å‹"
            },
            // äº²ç–æ°´åˆ†å¸ƒæ¨¡å‹é…ç½®
            hydrophobic: {
                style: () => ({
                    hydrophobic: { sphere: { color: "#FFD700", scale: 0.6 } }, // ç–æ°´åŒºé»„è‰²
                    default: { sphere: { color: "#4169E1", scale: 0.6 } }      // äº²æ°´åŒºè“è‰²
                }),
                surface: {
                    type: $3Dmol.SurfaceType.VDW, // è¡¨é¢ç±»å‹
                    opts: { 
                        opacity: 0.7, // è¡¨é¢é€æ˜åº¦
                        // è¡¨é¢é¢œè‰²å‡½æ•°ï¼šæ ¹æ®æ°¨åŸºé…¸ç±»å‹å†³å®šé¢œè‰²
                        colorfunc: (atom) => hydrophobicResidues.includes(atom.resn) ? "#FFD700" : "#4169E1"
                    }
                },
                label: "äº²ç–æ°´åˆ†å¸ƒ"
            }
        };
        
        // å®šä¹‰ç–æ°´æ€§æ°¨åŸºé…¸åˆ—è¡¨
        const hydrophobicResidues = ["ALA","VAL","LEU","ILE","MET","PHE","TRP","PRO"];
        
        // æ¯ç§æ˜¾ç¤ºæ¨¡å¼çš„æ³¨é‡Šä¿¡æ¯
        const annotationDict = {
            ribbon: `<strong>é£˜å¸¦æ¨¡å‹ (Ribbon)</strong>
            <b>å®šä¹‰ï¼š</b>ç”¨æ‰å¹³é£˜å¸¦è¡¨ç¤ºäºŒçº§ç»“æ„ï¼ˆÎ±èºæ—‹ä¸ºèºæ—‹çŠ¶ï¼ŒÎ²æŠ˜å ä¸ºç®­å¤´ï¼‰ã€‚
            <b>ç‰¹ç‚¹ï¼š</b>å¿½ç•¥åŸå­ç»†èŠ‚ï¼Œçªå‡ºè›‹ç™½è´¨éª¨æ¶çš„æŠ˜å æ¨¡å¼ã€‚`,
            wireframe: `<strong>çº¿æ£’æ¨¡å‹ (Wireframe)</strong>
            <b>å®šä¹‰ï¼š</b>ç”¨çº¿æ¡è¡¨ç¤ºåŒ–å­¦é”®ï¼ŒåŸå­ç”¨çº¿æ¡çš„èŠ‚ç‚¹è¡¨ç¤ºã€‚
            <b>ç‰¹ç‚¹ï¼š</b>ç»“æ„ç®€æ´ï¼Œçªå‡ºåˆ†å­éª¨æ¶å’Œé”®çš„èµ°å‘ã€‚`,
            ballstick: `<strong>æ£’çƒæ£æ¨¡å‹ (Ball-and-stick)</strong>
            <b>å®šä¹‰ï¼š</b>åŸå­ç”¨å½©è‰²çƒä½“è¡¨ç¤ºï¼ŒåŒ–å­¦é”®ç”¨æ£çŠ¶è¿æ¥ã€‚
            <b>ç‰¹ç‚¹ï¼š</b>ç›´è§‚æ˜¾ç¤ºåŸå­ç±»å‹ã€é”®é•¿å’Œé”®è§’ã€‚`,
            spacefill: `<strong>ç©ºé—´å¡«å……æ¨¡å‹ (Space-filling)</strong>
            <b>å®šä¹‰ï¼š</b>åŸå­æŒ‰èŒƒå¾·ååŠå¾„æ¯”ä¾‹æ˜¾ç¤ºä¸ºçƒä½“ã€‚
            <b>ç‰¹ç‚¹ï¼š</b>æœ€æ¥è¿‘åˆ†å­å®é™…ç©ºé—´å ä½çš„è¡¨ç°æ–¹å¼ã€‚`,
            surface: `<strong>è¡¨é¢å¡«å……æ¨¡å‹ (Surface)</strong>
            <b>æå®šä¹‰ï¼š</b>é€šè¿‡ç”µå­å¯†åº¦ç­‰å€¼é¢æˆ–æº¶å‰‚å¯åŠè¡¨é¢æ„å»ºåˆ†å­è¡¨é¢ã€‚
            <b>ç‰¹ç‚¹ï¼š</b>æ˜¾ç¤ºåˆ†å­è½®å»“å’Œè¡¨é¢ç‰¹å¾ã€‚`,
            hydrophobic: `<strong>äº²ç–æ°´åˆ†å¸ƒ (Hydrophobic)</strong>
            <b>å®šä¹‰ï¼š</b>é€šè¿‡é¢œè‰²æ ‡è®°åˆ†å­çš„äº²æ°´ï¼ˆææ€§ï¼‰å’Œç–æ°´ï¼ˆéææ€§ï¼‰åŒºåŸŸã€‚
            <b>ç‰¹ç‚¹ï¼š</b>ææ€§åŒºåŸŸå¸¸ç”¨è“è‰²è¡¨ç¤ºï¼Œç–æ°´åŒºåŸŸå¸¸ç”¨é»„è‰²è¡¨ç¤ºã€‚`
        };
        
        // åŠŸèƒ½ï¼šè®¾ç½®å½“å‰æ˜¾ç¤ºæ¨¡å¼
        async function setDisplayMode(mode) {
            // æ¸…é™¤ç°æœ‰çš„è¡¨é¢æ¸²æŸ“
            viewer.removeAllSurfaces();
            // é‡ç½®æ ·å¼
            viewer.setStyle({}, {});
            const config = displayModes[mode];
            if (!config) return;
            
            // åº”ç”¨æ ·å¼é…ç½®
            viewer.setStyle({}, config.style);
            
            // ç‰¹æ®Šå¤„ç†äº²ç–æ°´æ¨¡å¼
            if (mode === 'hydrophobic') {
                // è®¾ç½®ç–æ°´åŒºåŸŸæ ·å¼
                viewer.setStyle({ resn: hydrophobicResidues }, config.style().hydrophobic);
                // è®¾ç½®å…¶ä»–åŒºåŸŸæ ·å¼
                viewer.setStyle({ resn: { $not: hydrophobicResidues } }, config.style().default);
                // æ·»åŠ è¡¨é¢æ¸²æŸ“
                viewer.addSurface(config.surface.type, config.surface.opts);
            } else if (mode === 'surface') {
                // è¡¨é¢å¡«å……æ¨¡å‹ç‰¹å®šçš„è¡¨é¢è®¾ç½®
                viewer.addSurface($3Dmol.SurfaceType.VDW, {
                    opacity: 0.92,         // é€æ˜åº¦
                    color: 'spectrum',     // é¢œè‰²è°±
                    smooth: 16,            // å¹³æ»‘åº¦
                    probeRadius: 2.2        // æ¢é’ˆåŠå¾„
                });
            } else {
                // æ·»åŠ å…¶ä»–æ¨¡å¼çš„è¡¨é¢æ¸²æŸ“
                if (config.surface) {
                    viewer.addSurface(config.surface.type, config.surface.opts);
                }
            }
            
            // æ›´æ–°çŠ¶æ€æ ä¿¡æ¯
            document.getElementById('status-info').textContent = `å½“å‰æ¨¡å¼ï¼š${config.label}`;
            // æ›´æ–°æŒ‰é’®æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('button').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.includes(config.label));
            });
            
            // æ›´æ–°æ³¨é‡Šé¢æ¿å†…å®¹
            document.getElementById('annotation-panel').innerHTML = annotationDict[mode] || '';
            // æ¸²æŸ“æŸ¥çœ‹å™¨
            viewer.render();
        }
        
        // åŠŸèƒ½ï¼šåŠ è½½è›‹ç™½è´¨æ¨¡å‹
        async function loadModel(modelName = '1e6b') {
            try {
                
                // æ›´æ–°åŠ è½½çŠ¶æ€
                document.getElementById('status-info').textContent = "æ­£åœ¨åŠ è½½æ¨¡å‹...";
                // æ¸…é™¤ç°æœ‰æ¨¡å‹
                viewer.removeAllModels();
                
                // æ„é€ æ¨¡å‹URL
                const url = `https://suyecuni.github.io/BioStruct/models/${modelName}.pdb`;
                // è·å–æ¨¡å‹æ–‡ä»¶
                const response = await fetch(url);
                
                // é”™è¯¯å¤„ç†
                if (!response.ok) throw new Error(`åŠ è½½æ¨¡å‹å¤±è´¥`);
                // æ›´æ–°è§£æçŠ¶æ€
                document.getElementById('status-info').textContent = "è§£ææ¨¡å‹æ•°æ®...";
                
                // è·å–æ–‡æœ¬æ•°æ®
                const data = await response.text();
                // å‘æŸ¥çœ‹å™¨æ·»åŠ æ¨¡å‹
                viewer.addModel(data, "pdb");
                // è®¾ç½®é»˜è®¤æ˜¾ç¤ºæ¨¡å¼
                setDisplayMode('ribbon');
                // è°ƒæ•´è§†å›¾åˆ°åˆé€‚å¤§å°
                viewer.zoomTo();
                // æ¸²æŸ“æŸ¥çœ‹å™¨
                viewer.render();
                // æ›´æ–°åŠ è½½å®ŒæˆçŠ¶æ€
                document.getElementById('status-info').textContent = "æ¨¡å‹åŠ è½½å®Œæˆ";
                
                return true;
            } catch (error) {
                // é”™è¯¯å¤„ç†
                document.getElementById('status-info').textContent = "æ¨¡å‹åŠ è½½å¤±è´¥ï¼š" + error.message;
                return false;
            }
        }
        
        // åŠŸèƒ½ï¼šå¤„ç†æ¨¡å‹é€‰æ‹©å˜åŒ–
        function loadSelectedModel() {
            const selector = document.getElementById('modelSelector');
            const modelName = selector.value;
            loadModel(modelName);
        }
        
        // é¡µé¢åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œçš„æ“ä½œ
        document.addEventListener('DOMContentLoaded', function() {
            // åŠ è½½é»˜è®¤æ¨¡å‹
            loadModel();
            // å¯ç”¨ç¼©æ”¾
            viewer.enableZoom(true);
            // å¯ç”¨å¹³ç§»
            viewer.enablePan(true);
            // è®¾ç½®åˆå§‹æ³¨é‡Šå†…å®¹
            document.getElementById('annotation-panel').innerHTML = annotationDict['ribbon'];
        });
    </script>
</body>
</html>
